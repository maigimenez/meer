\documentclass[12pt,a4paper,titlepage,twoside]{report}
\usepackage[T1]{fontenc}
\usepackage[english, spanish,es-tabla]{babel}
\usepackage[utf8]{inputenc}
\usepackage[style=spanish]{csquotes}

%Latin modern font
\usepackage{lmodern}
\usepackage{tabularx}
%\usepackage[backend=bibtex]{biblatex}
%\bibliography{bibliografia.bib} % or

\usepackage{hyperref}
\usepackage{bookmark}
\usepackage[numbers]{natbib}

\usepackage{graphicx}
% Con esta opción no cargo las imágenes sólo sus espacios
%\usepackage[draft]{graphicx}
\usepackage{wrapfig} %Las imágenes quedan rodeadas de texto

%Interlineado
\usepackage{setspace}

% Parámetro para poder usar los colorines
\usepackage[pdftex,usenames,dvipsnames,table]{xcolor}
%Paquete para justificar el texto
\usepackage{ragged2e} 
\usepackage{notoccite}

% Penalizo la finalización o el inicio de la página con 
% lineas huerfanas
%\clubpenalty=10000
%\widowpenalty=10000

\usepackage[nottoc,numbib]{tocbibind}
\usepackage[toc,page]{appendix}

%Fancy chapter
\usepackage{titlesec, blindtext, color}
\definecolor{gray75}{gray}{0.75}
\newcommand{\hsp}{\hspace{20pt}}
\newcommand{\hsc}{\hspace{10pt}}
\titleformat{\chapter}[hang]{\LARGE\bfseries}{\thechapter\hsp\textcolor{RubineRed}{|}\hsp}{0pt}{\LARGE\bfseries}
\titleformat{\section}{\large\bfseries}{\thesection.\hsc{|}}{10pt}{\large\bfseries}

\usepackage{caption}
\usepackage{subcaption}

\usepackage{listings}
\usepackage{courier}
\usepackage{caption}
\definecolor{light-gray}{gray}{0.95}

\lstdefinestyle{dicom}{
    basicstyle=\footnotesize\ttfamily, 
    numbers=left,              
    extendedchars=true,
    stepnumber=1,               
    captionpos=b,
    numberstyle=\tiny\color{RubineRed},
    language=XML,
    numbersep=5pt,  
    tabsize=2,                  
    extendedchars=true,         
    breaklines=true,            
    %stringstyle=\color{white}\ttfamily,
    showspaces=false,           
    showtabs=false,             
    xleftmargin=5pt,
    framexleftmargin=5pt,
    framexrightmargin=5pt,
    framexbottommargin=4pt,
    %frame=single,
    morekeywords=[1]{CONCEPT_NAME,VALUE},
    morekeywords=[2]{CONTAINER,CHILDS,DATE, NUM, TEXT, UNIT_MEASUREMENT},
    morekeywords=[3]{CODE_VALUE,CODE_SCHEMA,CODE_MEANING,CODE_MEANING2, PROPERTIES,CARDINALITY,CONDITION_TYPE,DEFAULT_VALUE, EXPRESION_CONDITION},
    keywordstyle=[1]\color{CadetBlue}\bfseries,
    keywordstyle=[2]\color{BlueViolet}\bfseries,
    keywordstyle=[3]\color{RoyalPurple},
    morecomment=[s]{<!--}{-->},
    commentstyle=\itshape\color{RubineRed},
    backgroundcolor=\color{light-gray},
    showstringspaces=false    
}

\definecolor{Code}{rgb}{0,0,0}
\definecolor{Decorators}{rgb}{0.5,0.5,0.5}
\definecolor{Numbers}{rgb}{0.5,0,0}
\definecolor{MatchingBrackets}{rgb}{0.25,0.5,0.5}
\definecolor{Keywords}{rgb}{0,0,1}
\definecolor{self}{rgb}{0,0,0}
\definecolor{Strings}{rgb}{0,0.63,0}
\definecolor{Comments}{rgb}{0,0.63,1}
\definecolor{Backquotes}{rgb}{0,0,0}
\definecolor{Classname}{rgb}{0,0,0}
\definecolor{FunctionName}{rgb}{0,0,0}
\definecolor{Operators}{rgb}{0,0,0}
\definecolor{Background}{rgb}{0.98,0.98,0.98}

\lstdefinestyle{python}{
numbers=left,
numberstyle=\footnotesize,
numbersep=1em,
xleftmargin=1em,
framextopmargin=2em,
framexbottommargin=2em,
showspaces=false,
showtabs=false,
showstringspaces=false,
frame=l,
tabsize=4,
% Basic
basicstyle=\ttfamily\small\setstretch{1},
backgroundcolor=\color{Background},
language=Python,
% Comments
commentstyle=\color{Comments}\slshape,
% Strings
stringstyle=\color{Strings},
morecomment=[s][\color{Strings}]{"""}{"""},
morecomment=[s][\color{Strings}]{'''}{'''},
% keywords
morekeywords={import,from,class,def,for,while,if,is,in,elif,else,not,and,or,print,break,continue,return,True,False,None,access,as,,del,except,exec,finally,global,import,lambda,pass,print,raise,try,assert},
keywordstyle={\color{Keywords}\bfseries},
% additional keywords
morekeywords={[2]@invariant},
keywordstyle={[2]\color{Decorators}\slshape},
emph={self},
emphstyle={\color{self}\slshape}
}
    \lstset{%
        inputencoding=utf8,
            extendedchars=true,
            literate=%
            {é}{{\'{e}}}1
            {è}{{\`{e}}}1
            {ê}{{\^{e}}}1
            {ë}{{\¨{e}}}1
            {û}{{\^{u}}}1
            {ù}{{\`{u}}}1
            {â}{{\^{a}}}1
            {à}{{\`{a}}}1
            {î}{{\^{i}}}1
            {ç}{{\c{c}}}1
            {Ç}{{\c{C}}}1
            {É}{{\'{E}}}1
            {Ê}{{\^{E}}}1
            {À}{{\`{A}}}1
            {Â}{{\^{A}}}1
            {Î}{{\^{I}}}1
    }


\DeclareCaptionFont{white}{\color{white}}
\DeclareCaptionFormat{listing}{\colorbox{RubineRed}{\parbox{\textwidth}{\hspace{15pt}#1#2#3}}}
\captionsetup[lstlisting]{format=listing,labelfont=white,textfont=white, singlelinecheck=false, margin=0pt, font={bf,footnotesize}}

%\renewcommand{\arraystretch}{1.5}

% Table of contents on the begining of a line. 
\usepackage{titletoc}
% Referencias
\usepackage{hyperref}

\usepackage[includefoot]{geometry}
\geometry{
  top=2cm,
  inner=2.7cm,
  outer=2.7cm,
  bottom=4cm,
  headheight=5ex,       % <-- and this
  headsep=5ex,
  footskip = 1.5cm          % <-- and this
}

% Cabecera
% http://tug.ctan.org/tex-archive/macros/latex/contrib/fancyhdr/
\usepackage{fancyhdr}
\setlength{\headheight}{3cm}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[LE,RO]{\nouppercase \rightmark}
\fancyhead[LO,RE]{\nouppercase \leftmark}
\fancyfoot[C]{\thepage}


\newcommand{\Keywords}[1]{\vfill\noindent{\small{\em Palabras clave}: #1}}
\definecolor{grisclar}{gray}{0.5}
\definecolor{grisfosc}{gray}{0.25}

% Editar con los datos correspondientes
\newcommand{\titulo}{Meer: Generación automática de aplicaciones para terminales móviles inteligentes a partir de informes DICOM SR. }
\newcommand{\titulacion}{Ingeniería Informática}
\newcommand{\autor}{Mayte Giménez Fayos}
\newcommand{\director}{Ignacio Blanquer}
\newcommand{\codirector}{Damià Segrelles}

\usepackage{longtable}

% Allows to display directory tree, like in the windows explorator
\usepackage{dirtree}
\usepackage{pdfpages}


\title{\titulo}
\author{\autor}


% de tocbibind, para que el índice de listados aparezca en la ToC
\renewcommand{\lstlistoflistings}{\begingroup
   \tocfile{\lstlistlistingname}{lol}
\endgroup}

\begin{document}

\input{portada_cas}
%\includepdf[pages={1}]{./imgs/portada.pdf}

\begin{abstract}
El objetivo del siguiente Proyecto Fin de Carrera consiste en el desarrollo de una aplicación que a partir de un esquema de un informe médico, codificado en el estándar DICOM-SR, genere de manera automática una aplicación para dispositivos móviles de tipo Android de modo que facilite la adquisición de datos de pacientes e informes válidos.
\medskip  \par
El estándar Digital Imaging and Communication in Medicine (DICOM) define como tratar imágenes médicas desde su procesado hasta su comunicación. DICOM también especifica una extensión para soportar informes estructurados médicos (DICOM-SR), lo que ha permitido el desarrollo de distintas líneas de investigación basadas en este estándar. \medskip \par

En el ámbito médico, es fundamental que los datos adquiridos en los informes sean exhaustivos y fidedignos, sin embargo la gran versatilidad el estándar DICOM-SR hace que la propia adquisición de los datos sea un reto, en la que  la aparición y expansión de terminales móviles inteligentes pueden facilitar  la interacción entre el  usuario y la máquina. Estas tecnologías nos ofrecen la posibilidad de obtener datos de informes clínicos sin incrementar significativamente la carga de trabajo del personal médico. Por ello, son estas cualidades las que pretendemos explorar y explotar en este PFC, simplificando el proceso de adquisición de información para la obtención masiva de datos y de una mayor calidad.\par
Para ello se plantea como objetivo del PFC,  una aplicación para terminales Android, que permita al usuario introducir los datos de los informes estructurados basados en DICOMSR,  de un modo productivo, eficiente e intuitivo. La aplicación propuesta debe generar automáticamente a partir de un fichero plantilla donde se defina la estructura de informe DICOM-SR,  el código de la aplicación Android que proporcione la funcionalidad de inserción de informes.\par

\Keywords{DicomSR, Android, Python, Generación automática de código, imagen médica.}
\end{abstract}

\tableofcontents
\newpage

\listoffigures
\renewcommand\lstlistlistingname{Índice de código fuente}
\lstlistoflistings
\listoftables

\chapter{Introducción}
\input{intro}

\chapter{Objetivos}
\input{objetivos}

\chapter{Estado del arte }\label{arte}
\chaptermark{Estado del arte}
\input{estadoArte}

\chapter{Tecnologías empleadas en el proyecto}
\input{tecnologias}

\chapter{Análisis}
\input{analisis}

\chapter{Diseño}
\input{design}

\chapter{Implementación}
\input{implementacion}

\chapter{Verificación: un caso práctico}
\input{verificacion}

\chapter{Conclusiones}

\chapter{Futuras mejoras}

%\printbibliography
\bibliographystyle{unsrtnat}
\bibliography{bibliografia}

\appendix
\chapter{Informe DICOM-SR}\label{dicom-sr}
\input{ap_dicomSR.tex}

\chapter{Plantilla de un informe DICOM-SR}\label{dicom-sr-template}
\input{ap_dicomTemplate.tex}


\end{document}